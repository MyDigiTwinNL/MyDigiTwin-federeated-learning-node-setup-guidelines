    1  ip address
    2  sudo reboot now
    3  apt-get install qemu-guest-agent
    4  sudo apt-get install qemu-guest-agent
    5  docker
    6  sudo apt-get update
    7  sudo apt-get install ca-certificates curl gnupg
    8  sudo install -m 0755 -d /etc/apt/keyrings
    9  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
   10  sudo chmod a+r /etc/apt/keyrings/docker.gpg
   11  # Add the repository to Apt sources:
   12  echo   "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
   13    $(. /etc/os-release && echo "$VERSION_CODENAME") stable" |   sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
   14  sudo apt-get update
   15  sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
   16  sudo docker run hello-world
   17  pip
   18  sudo apt install python3-pip
   19  pip
   20  pip install vantage6
   21  sudo snap install --classic certbot
   22  sudo ln -s /snap/bin/certbot /usr/bin/certbot
   23  pwd
   24  sudo apt-install nginx
   25  sudo apt-get install  nginx
   26  sudo ufw app list
   27  sudo ufw status
   28  sudo ufw allow 'Nginx Full'
   29  sudo ufw status
   30  sudo ufw allow 'Nginx Full'
   31  sudo ufw status
   32  sudo ufw allow 'Nginx HTTP'
   33  sudo ufw status
   34  sudo service --status-all | grep netfilter-persistent
   35  sudo systemctl enable ufw
   36  sudo ufw status
   37  sudo service --status-all | grep netfilter-persistent
   38  python3 -m simple.httpserver
   39  python3 -m http.server
   40  ls
   41  touch README
   42  python3 -m http.server
   43  ifconfig
   44  ip address
   45  python3 -m http.server
   46  sudo ufw app list
   47  sudo ufw allow 'Nginx HTTP'
   48  systemctl status nginx
   49  ls
   50  nano /etc/nginx/nginx.conf 
   51  sudo apt install certbot python3-certbot-nginx
   52  sudo certbot --nginx
   53  openssl req -x509 -newkey rsa:4096 -nodes -out cert.pem -keyout key.pem -days  365
   54  ls
   55  ls /etc/ssl/
   56  ls
   57  cp cert.pem /etc/ssl/
   58  sudo cp cert.pem /etc/ssl/
   59  sudo cp key.pem /etc/ssl/
   60  sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt
   61  curl -fsSL https://pkgs.tailscale.com/stable/ubuntu/focal.noarmor.gpg | sudo tee /usr/share/keyrings/tailscale-archive-keyring.gpg >/dev/null
   62  curl -fsSL https://pkgs.tailscale.com/stable/ubuntu/focal.tailscale-keyring.list | sudo tee /etc/apt/sources.list.d/tailscale.list
   63  sudo apt-get update
   64  sudo apt-get install tailscale
   65  sudo tailscale up
   66  sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/nginx-selfsigned.key -out /etc/ssl/certs/nginx-selfsigned.crt
   67  ls /etc/ssl/private/
   68  sudo ls /etc/ssl/private/
   69  sudo ls /etc/ssl/certs/
   70  sudo nano /etc/nginx/snippets/self-signed.conf
   71  sudo nano /etc/nginx/snippets/ssl-params.conf
   72  sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak
   73  sudo ls /etc/nginx/sites-available/
   74  sudo ls /etc/nginx/sites-available/ -l
   75  sudo ls /etc/nginx/sites-available/default
   76  sudo ls -l /etc/nginx/sites-available/default
   77  sudo nano /etc/nginx/sites-available/default
   78  git log
   79  log
   80  historu
   81  history
   82  tailscal
   83  tailscale
   84  tailscale cert
   85  tailscale cert v6-server.tail984a0.ts.net
   86  sudo tailscale cert v6-server.tail984a0.ts.net
   87  sudo ls /etc/ssl/private/
   88  sudo rm /etc/ssl/private/
   89  sudo ls /etc/ssl/private/
   90  sudo rm /etc/ssl/private/nginx-selfsigned.key
   91  sudo ls /etc/ssl/cert/
   92  sudo ls /etc/ssl/certs/nginx-selfsigned.crt 
   93  sudo rm /etc/ssl/certs/nginx-selfsigned.crt 
   94  sudo ls /etc/ssl/cert.pem 
   95  sudo ls -l /etc/ssl/cert.pem 
   96  sudo rm /etc/ssl/cert.pem 
   97  sudo rm /etc/ssl/key.pem 
   98  ls
   99  ls -l
  100  sudo rm /etc/ssl/certs/nginx-selfsigned.crt 
  101  sudo cp v6-server.tail984a0.ts.net.crt /etc/ssl/certs
  102  sudo ls -l /etc/ssl/private/
  103  sudo cp v6-server.tail984a0.ts.net.key /etc/ssl/private/
  104  ls -l
  105  more v6-server.tail984a0.ts.net.key 
  106  sudo more v6-server.tail984a0.ts.net.key 
  107  sudo more v6-server.tail984a0.ts.net.crt 
  108  ls
  109  ls /etc/nginx/nginx.conf 
  110  ls /etc/nginx/sites-available/default
  111  ls /etc/nginx/sites-available/default.bak 
  112  diff /etc/nginx/sites-available/default.bak  /etc/nginx/sites-available/default
  113  rm  /etc/nginx/sites-available/default
  114  sudo rm  /etc/nginx/sites-available/default
  115  sudo mv  /etc/nginx/sites-available/default.bak /etc/nginx/sites-available/default
  116  ls
  117  more /etc/nginx/sites-available/default 
  118  nano /etc/nginx/sites-available/default 
  119  sudo nano /etc/nginx/sites-available/default 
  120  curl -4 v6-server.tail984a0.ts.net
  121  sudo systemctl reload nginx
  122  sudo nano /etc/nginx/sites-available/default 
  123  sudo nginx -t
  124  sudo ufw status
  125  sudo ufw allow 'Nginx Full'
  126  sudo ufw delete allow 'Nginx HTTP'
  127  sudo ufw status
  128  sudo ufw enable
  129  sudo ufw status
  130  history | grep ufw
  131  sudo ufw app list
  132  sudo ufw allow 'OpenSSH'
  133  sudo ufw status
  134  curl -4 v6-server.tail984a0.ts.net
  135  echo v6-server.tail984a0.ts.net > README
  136  sudo certbot --nginx -d v6-server.tail984a0.ts.net
  137  exit
  138  ls
  139  docker
  140  sudo apt-get install qemu-guest-agent
  141  sudo certbot --nginx -d v6-server.tail984a0.ts.net
  142  ls
  143  ls /etc/ssl/private/
  144  sudo ls /etc/ssl/private/
  145  sudo nano /etc/nginx/sites-enabled/default 
  146  sudo ls /etc/ssl/private/
  147  sudo pwd /etc/ssl/private/v6-server.tail984a0.ts.net.key
  148  sudo ls /etc/ssl/private/v6-server.tail984a0.ts.net.key
  149  sudo nano /etc/nginx/sites-enabled/default 
  150  sudo ls -l /etc/ssl/cert/v6-server.tail984a0.ts.net.crt
  151  sudo ls -l /etc/ssl/certs/v6-server.tail984a0.ts.net.crt
  152  sudo nano /etc/nginx/sites-enabled/default 
  153  sudo nginx -t
  154  sudo nano /etc/nginx/sites-enabled/default 
  155  sudo nginx -t
  156  history 
  157  history >> STEPS.txt
  158  ls
  159  more STEPS.txt 
  160  LS
  161  LS -L
  162  ls -l
  163  sudo ufw status
  164  history | grep 
  165  history 
  166  history | more
  167  curl -4 v6-server.tail984a0.ts.net
  168  sudo nginx -t
  169  curl -4 v6-server.tail984a0.ts.net
  170  sudo reboot
  171  ls
  172  ps
  173  ps -fea
  174  exit
  175  curl -4 v6-server.tail984a0.ts.net
  176  ls
  177  history | grep nano
  178  sudo nano /etc/nginx/sites-enabled/default
  179  python -m http.server
  180  python3 -m http.server
  181  python3 -m http.server -p 8080
  182  python3 -m http.server 8080
  183  ls
  184  python3 -m http.server 8080
  185  ls
  186  ls -l
  187  more README 
  188  ping v6-server.tail984a0.ts.net
  189  pip freeze
  190  pip freeze > dependencies.txt
  191  ls
  192  docker
  193  ls
  194  mkdir refs
  195  cd refs/
  196  ls
  197  git clone git@github.com:hcadavid/v6testenv.git
  198  ls ~/.ssh/
  199  ssh-keygen -t ed25519 -C "hector.cadavid@gmail.com"
  200  more ~/.ssh/id_ed25519.pub 
  201  git clone git@github.com:hcadavid/v6testenv.git
  202  ls
  203  cd v6testenv/
  204  ls
  205  ls /srv/
  206  sudo ls /srv/
  207  python3 -m http.server 8080
  208  ls
  209  docker-compose
  210  sudo apt install docker-compose
  211  docker-compose 
  212  /usr/bin/docker-compose 
  213  ls
  214  more docker-compose.yml 
  215  ls
  216  mkdir /opt/v6
  217  sudo /opt/v6
  218  ls /opt/
  219  sudo mkdir /opt/v6
  220  sudo adduser v6
  221  sudo chown -R v6:v6 /opt/v6
  222  ls -ld /opt/v6/
  223  ls
  224  more docker-compose.yml 
  225  qls
  226  ls
  227  ls server/config.yaml 
  228  ls
  229  sudo mkdir /opt/v6/config
  230  sudo cp ./server/config.yaml /opt/v6/config/
  231  ls
  232  sudo cp docker-compose.yml  /opt/v6
  233  ls
  234  su v6
  235  sudo chown -R v6:v6 /opt/v6
  236  su v6
  237  ls
  238  su v6
  239  sudo su
  240  sudo groupadd docker
  241  sudo usermod -aG docker v6
  242  groups v6
  243  su v6
  244  sudo nano /etc/systemd/v6.service
  245  ps- fea
  246  ps -fea
  247  su v6
  248  sudo nano /etc/systemd/v6.service
  249  sudo systemctl daemon-reload
  250  sudo systemctl enable v6.service
  251  sudo mv /etc/systemd/v6.service /etc/systemd/system/v6.service
  252  sudo more /etc/systemd/system/v6.service
  253  sudo systemctl daemon-reload
  254  sudo systemctl enable v6.service
  255  sudo systemctl start v6.service 
  256  systemctl status v6.service
  257  whereis docker-compose
  258  sudo nano /etc/systemd/v6.service
  259  sudo nano /etc/systemd/system/v6.service
  260  ls /usr/bin/docker-compose 
  261  sudo systemctl daemon-reload
  262  sudo systemctl enable v6.service
  263  sudo systemctl start v6.service 
  264  ps -fea
  265  ls
  266  cd ~
  267  ls
  268  history > STEPS2.txt
  269  ls -l
  270  sudo systemctl stop v6.service 
  271  ls
  272  cd /opt/v6/
  273  ls
  274  nano docker-compose.yml 
  275  su v6
  276  history | grep nginx
  277  nano /etc/nginx/sites-available/default 
  278  sudo nano /etc/nginx/sites-available/default 
  279  history | grep nginx
  280  sudo nginx -t
  281  sudo vi /etc/nginx/sites-available/default 
  282  sudo nginx -t
  283  history | grep nginx
  284  sudo systemctl reload nginx
  285  sudo vi /etc/nginx/sites-available/default 
  286  sudo systemctl reload nginx
  287  sudo nginx -t
  288  sudo reboot
  289  sudo cat /var/log/nginx/error. log
  290  sudo cat /var/log/nginx/error.log
  291  sudo nano /etc/nginx/sites-available/default 
  292  curl -4 localhost:5000
  293  curl -4 localhost:8080
  294  ls
  295  sudo more /opt/v6/docker-compose.yml 
  296  curl -4 localhost:8080
  297  curl -4 localhost:5000
  298  curl -4 localhost:5000/aa
  299  curl -4 localhost:5000
  300  curl -4 localhost:5000/socket.io
  301  sudo more /opt/v6/docker-compose.yml 
  302  sudo nano /etc/nginx/sites-available/default 
  303  ps-fea
  304  ps -fea
  305  ls
  306  sudo more /opt/v6/docker-compose.yml 
  307  curl -4 localhost:5000/api
  308* systemctl status v
  309  journalctl -u v6.service
  310  ps -fea
  311  journalctl -u v6.service
  312  sudo systemctl stop v6.service
  313  journalctl -u v6.service
  314  ps -fea
  315  ls
  316  su v6
  317  curl https://raw.githubusercontent.com/jesseduffield/lazydocker/master/scripts/install_update_linux.sh | bash
  318  lazydocker 
  319  history | grep useradd
  320  history | grep user
  321  sudo usermod -aG docker hcadavid
  322  ls
  323  lazydocker 
  324  sudo lazydocker 
  325  ls
  326  whereis lazydocker
  327  lazydocker 
  328  ls
  329  whereis lazydocker
  330  sudo cp ~/.local/bin/lazydocker /usr/bin/
  331  lazydocker 
  332  sudo lazydocker 
  333  lazydocker 
  334  sudo lazydocker 
  335  sudo nano /etc/nginx/sites-available/default 
  336  sudo systemctl reload nginx.service 
  337  curl -4 localhost:8080
  338  curl -4 localhost:5000
  339  python http.server 8080
  340  python3 http.server 8080
  341  python3 -m http.server 8080
  342  sudo nano /etc/nginx/sites-available/default 
  343  sudo systemctl reload nginx.service 
  344  python3 -m http.server 8080
  345  sudo nano /etc/nginx/sites-available/default 
  346  sudo systemctl reload nginx.service 
  347  python3 -m http.server 8080
  348  sudo nano /etc/nginx/sites-available/default 
  349  python3 -m http.server 8080
  350  sudo systemctl start v6.service
  351  curl localhost:8080
  352  history | grep v6.service
  353  sudo systemctl stop v6.service 
  354  python3 -m http.server 8080
  355  history | grep v6.service
  356  sudo systemctl start v6.service 
  357  sudo systemctl stop v6.service 
  358  sudo nano /etc/nginx/sites-available/default 
  359  sudo systemctl reload nginx.service 
  360* sudo systemctl st v6.service 
  361  sudo nano /etc/nginx/sites-available/default 
  362  sudo systemctl reload nginx.service 
  363  sudo nano /etc/nginx/sites-available/default 
  364  su v6
  365  sudo nano /etc/nginx/sites-available/default 
  366  sudo systemctl reload nginx.service 
  367  history | grep log
  368  sudo cat /var/log/nginx/error.log
  369  sudo nano /etc/nginx/sites-available/default 
  370  sudo systemctl reload nginx.service 
  371  sudo nano /etc/nginx/sites-available/default 
  372  sudo systemctl reload nginx.service 
  373  ls
  374  su v6
  375  ls
  376  tail STEPS2.txt 
  377  tail --help
  378  tail -n 20 STEPS2.txt 
  379  tail -n 20 STEPS2.txt  >> README 
  380  nano README 
  381  history | grep nginx
  382  nano README 
  383  ls
  384  MORE README 
  385  more README 
  386  sudo nano /etc/nginx/sites-available/default 
  387  ps -fea
  388  sudo nano /etc/nginx/sites-available/default 
  389  history | grep ngnix
  390  ls
  391  more README 
  392  sudo nano /etc/nginx/sites-available/default 
  393  sudo systemctl reload nginx
  394  sudo nano /etc/nginx/sites-available/default 
  395  sudo systemctl reload nginx
  396  sudo nano /etc/nginx/sites-available/default 
  397  sudo systemctl reload nginx
  398  sudo nano /etc/nginx/sites-available/default 
  399  curl http://localhost:8080
  400  curl http://localhost:8080ls
  401  ls
  402  sudo nano /etc/nginx/sites-available/default 
  403  sudo systemctl reload nginx
  404  sudo nano /etc/nginx/sites-available/default 
  405  sudo systemctl reload nginx
  406  sudo nano /etc/nginx/sites-available/default 
  407  sudo systemctl reload nginx
  408  sudo nano /etc/nginx/sites-available/default 
  409  sudo systemctl reload nginx
  410  sudo nano /etc/nginx/sites-available/default 
  411  sudo systemctl reload nginx
  412  sudo nano /etc/nginx/sites-available/default 
  413  sudo systemctl reload nginx
  414  history | grep -t
  415  history | grep nginx
  416  sudo nginx -t
  417  sudo systemctl reload nginx
  418  sudo nano /etc/nginx/sites-available/default 
  419  sudo systemctl reload nginx
  420  sudo nano /etc/nginx/sites-available/default 
  421  sudo systemctl reload nginx
  422  sudo nano /etc/nginx/sites-available/default 
  423  sudo systemctl reload nginx
  424  ls
  425  mkdir configs
  426  cd configs/
  427  ls
  428  sudo nano /etc/nginx/sites-available/default 
  429  sudo cp /etc/nginx/sites-available/default .
  430  ls
  431  mv default nginxconf
  432  sudo cp /opt/v6/docker-compose.yml .
  433  history | grep
  434  history | grep .service
  435  sudo cp /etc/systemd/system/v6.service .
  436  ls
  437  ls -l
  438  more v6.service 
  439  git init
  440  git init .
  441  git add .
  442  git commit -m "config params"
  443  git config --global user.email "h.cadavid@esciencecenter.nl"
  444  git commit -m "config params"
  445  ls -l
  446  more v6.service 
  447  ls
  448  more nginxconf 
  449  history > history.txt
